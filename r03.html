<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta content="width=2350, maximum-scale=1.0" name="viewport" />
    <link href="./css/stylesright.css" rel="stylesheet" type="text/css" />
    <link href="./css/styles.css" rel="stylesheet" type="text/css" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
</head>

<body>
    <input id="anPageName" name="page" type="hidden" value="right01" />

    <!-- animation player -->
    <script src="./js/lottie.js"></script>

    <div id="purpBreathing" onclick="stepper()" class="dellmetrics-dataclick"
        datametrics="{'btnname':'cta|residency|improve network performance'}">
    </div>
    <img class='plus-imgs' id='purp-plus-img' src='images/add-cir.png' />
    <!-- <img id="purpIcon" src='images/Purple icon plus.png' onclick="stepper()"/> -->
    <div id="purpBreathing2" onclick="stepper()" class="dellmetrics-dataclick"
        datametrics="{'btnname':'cta|residency|kpis purple'}"></div>
    <img class='plus-imgs' id='purp-plus-img2' src='images/add-cir.png' />
    <div id="orangeBreathing" onclick="stepper()" class="dellmetrics-dataclick"
        datametrics="{'btnname':'cta|residency|improve data resiliency'}"></div>
    <img class='plus-imgs' id='orange-plus-img' src='images/add-cir.png' />
    <div id="orangeBreathing2" onclick="stepper()" class="dellmetrics-dataclick"
        datametrics="{'btnname':'cta|residency|kpis orange'}"></div>

    <div id="r03-btn1-pulse"></div>
    <button id="r03-btn1" onclick="stepper()" class="dellmetrics-dataclick"
        datametrics="{'btnname':'cta|residency|modernize workforce'}">
        Modernize Workforce
    </button>
    <img class='plus-imgs' id='r03-plus-img' src='images/add-cir.png' />

    <img class='plus-imgs' id='start-plus-img' src='images/add-cir.png' />

    <div id="btnstart-pulse"></div>

    <button id="btnstart" onclick="stepper()">
        Continue
    </button>

    <div id="lottie"></div>

    <!-- animation data -->
    <script src="./js/anim03.js"></script>

    <script>

    </script>

    <script src="./js/mainright.js"></script>
    <script src="./js/audio.js"></script>

    <audio id="audio4" autoplay="false">
        <source src="./audio/vo_04.mp3">
    </audio>
    <audio id="audio5" autoplay="false">
        <source src="./audio/vo_05.mp3">
    </audio>
    <audio id="audio6" autoplay="false">
        <source src="./audio/vo_06.mp3">
    </audio>
    <audio id="audio7" autoplay="false">
        <source src="./audio/vo_07.mp3">
    </audio>
    <audio id="audio8" autoplay="false">
        <source src="./audio/vo_08.mp3">
    </audio>

    <script>
        var anim = lottie.loadAnimation(params);
        let stepCnt = 0;
        const btnStart = document.getElementById('btnstart');
        const btnStartPulse = document.getElementById('btnstart-pulse');
        const purpBreathing = document.getElementById('purpBreathing');
        const purpBreathing2 = document.getElementById('purpBreathing2');
        const purpPlus = document.getElementById('purp-plus-img');
        const purpPlus2 = document.getElementById('purp-plus-img2');
        const orangeBreathing = document.getElementById('orangeBreathing');
        const orangeBreathing2 = document.getElementById('orangeBreathing2');
        const orangePlus = document.getElementById('orange-plus-img');
        const r03Btn1 = document.getElementById('r03-btn1');
        const r03Btn1Pulse = document.getElementById('r03-btn1-pulse');
        const plusImg = document.getElementById('r03-plus-img');
        const startPlus = document.getElementById('start-plus-img');
        const audio4 = document.getElementById('audio4');
        const audio5 = document.getElementById('audio5');
        const audio6 = document.getElementById('audio6');
        const audio7 = document.getElementById('audio7');
        const audio8 = document.getElementById('audio8');
        const audioArray = [audio4, audio5, audio6, audio7, audio8];

        function vid1() {
            anim.playSegments([0, 120], true);
        }

        function vid2() {
            anim.playSegments([121, 420], true);
        }

        function vid3() {
            anim.playSegments([421, 580], true);
        }

        function vid4() {
            anim.playSegments([581, 739], true);
        }

        function vid5() {
            anim.playSegments([740, 1139], true);
        }

        // Show buttons after video is done playing
        async function stepper() {
            if (stepCnt === 0) {
                try {
                    await playAudio(audioArray, stepCnt);
                    vid1();
                    btnStart.style.visibility = 'hidden';
                    btnStartPulse.style.visibility = 'hidden';
                    startPlus.style.visibility = 'hidden';
                    vid1();
                    setTimeout(() => {
                        purpBreathing.style.visibility = 'visible';
                        purpPlus.style.visibility = 'visible';
                        purpPlus.classList.add('scaleBtn')
                        stepCnt = 1;
                    }, 4000); // Timer: end interaction 1
                } catch (err) {
                    // Audio failed to play without interaction from user - Create interaction
                    btnStart.style.visibility = 'visible';
                    btnStart.classList.add('scaleBtn');
                    startPlus.style.visibility = 'visible'
                    startPlus.classList.add('scaleBtn');
                    setTimeout(() => {
                        btnStartPulse.style.visibility = 'visible';
                    }, 600);
                }
            } else if (stepCnt === 1) {
                purpBreathing.style.visibility = 'hidden';
                purpPlus.style.visibility = 'hidden';
                playAudio(audioArray, stepCnt);
                vid2();
                setTimeout(() => {
                    purpBreathing2.style.visibility = 'visible';
                    purpPlus2.style.visibility = 'visible';
                    purpPlus2.classList.add('scaleBtn')
                    stepCnt = 2;
                }, 29000); // Timer: end interaction 2
            } else if (stepCnt === 2) {
                purpBreathing2.style.visibility = 'hidden';
                purpPlus2.style.visibility = 'hidden';
                playAudio(audioArray, stepCnt);
                vid3();
                setTimeout(() => {
                    orangeBreathing.style.visibility = 'visible';
                    orangePlus.style.visibility = 'visible';
                    orangePlus.classList.add('scaleBtn')
                    stepCnt = 3;
                }, 13000); // Timer: end interaction 3
            } else if (stepCnt === 3) {
                orangeBreathing.style.visibility = 'hidden';
                orangePlus.style.visibility = 'hidden';
                orangePlus.classList.remove('scaleBtn')
                playAudio(audioArray, stepCnt);
                vid4();
                setTimeout(() => {
                    orangeBreathing2.style.visibility = 'visible';
                    orangePlus.style.visibility = 'visible';
                    orangePlus.classList.add('scaleBtn')
                    stepCnt = 4;
                }, 4000); // Timer: end interaction 4
            } else if (stepCnt === 4) {
                orangeBreathing2.style.visibility = 'hidden';
                orangePlus.style.visibility = 'hidden';
                playAudio(audioArray, stepCnt);
                vid5();
                setTimeout(() => {
                    r03Btn1.style.visibility = 'visible';
                    plusImg.style.visibility = 'visible'
                    r03Btn1.classList.add('scaleBtn');
                    plusImg.classList.add('scaleBtn');
                    stepCnt = 5;
                    setTimeout(() => {
                        r03Btn1Pulse.style.visibility = 'visible';
                    }, 600);
                }, 11000); // Timer: end interaction 5
            } else {
                trigger();
            }
        }

        window.addEventListener('load', stepper())
    </script>
</body>

</html>